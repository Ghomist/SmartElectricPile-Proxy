# 部分技术文档

## 目录

-   [通讯架构](#通讯架构)
-   [协议](#协议)
-   [网关架构](#网关架构)
-   [前端架构](#前端架构)
-   [设备层接口](#设备层接口)

## 通讯架构

一套完整的 IoT 体系一般由以下四个部分组成（由上至下依次）：

-   [应用侧](#应用侧)：由用户可见的前端产品组成，如小程序、网页、APP 等，承担与用户交互的任务；
-   [云平台](#云平台)：云端总管数据、指令，也是各类数据的汇总、分析处；
-   [集群与网关](#集群与网关)：在云平台与多台设备（设备集群）之间实现数据或命令的整合、转发等功能，分担云平台与设备的计算任务；
-   [终端设备](#终端设备)：实地工作的设备、硬件，需承担绝大多数的测量、监测任务。

各层次互相通讯，且只与相邻的层级通讯，保证了各个层级的分工明确，效率最大化。

### 应用侧

一般包括：

-   网络页面
-   小程序（本质同上）
-   桌面应用程序
-   移动设备应用程序
-   ……

应用侧最重要的部分是与用户交互，需要明确**交互的对象是一般用户、企业管理，而非专业的工程师**。所以设计图形界面的首要任务是**简单、易用、用户友好**。

其次，应用侧只负责调用云平台数据，而不应进行过多运算、处理；下发指令时向云平台发送指令，由云平台下发至对应网关。

应用侧使用的主流网络协议一般为 http/https、AMQPS。

### 云平台

可选的方案是在云服务器上部署 mqtt broker（如 mosquitto 一类的 mqtt broker 应用），或是选择已有的 IoT 云平台产品，如各大厂商的云平台应用。主流平台一般有：华为云、阿里云等等。

### 集群与网关

### 终端设备

## 协议

### http/https

### mqtt

## 网关架构

### cloud-side-client

### local-side-client

## 前端架构

## 设备层接口

### Topic

### payload format
